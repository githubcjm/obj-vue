{"version":3,"sources":["webpack:///./src/views/Login.vue?bb19","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?5da6","webpack:///./src/views/Login.vue","webpack:///./src/views/Login.vue?bec3"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","href","on","click","change","staticStyle","font-size","_v","to","id","required","clearable","placeholder","model","value","callback","$$v","phone","expression","type","istrue","pas","margin","width","align","colspan","changelogin","_m","staticRenderFns","text-decoration","onclick","Loginvue_type_script_lang_js_","data","cookie","methods","_changelogin","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","_this","wrap","_context","prev","next","document","slice","length","$axios","method","url","$qs","stringify","token","then","res","console","log","alert","name","headers","content-type","$router","push","setTimeout","now","Date","setDate","getDate","toUTCString","stop","apply","arguments","created","_created","_callee2","_context2","views_Loginvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Login_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Login_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-9f3e2afc.85edabdc.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"header-float\"},[_c('div',{staticClass:\"left\"},[_c('a',{staticClass:\"more mores\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":_vm.change}})]),_c('div',{staticClass:\"center\",staticStyle:{\"font-size\":\"20px\"}},[_vm._v(\"免费注册登录\")]),_c('div',{staticClass:\"right\"},[_c('router-link',{attrs:{\"to\":\"/tabbar/home\"}},[_c('a',{staticClass:\"cart\"},[_c('em',{attrs:{\"id\":\"top_cart_v2\"}},[_vm._v(\"0\")])])])],1)]),_c('van-cell-group',[_c('van-field',{attrs:{\"required\":\"\",\"clearable\":\"\",\"placeholder\":\"请输入用户名\"},model:{value:(_vm.phone),callback:function ($$v) {_vm.phone=$$v},expression:\"phone\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"required\":_vm.istrue,\"placeholder\":\"请输入密码\"},model:{value:(_vm.pas),callback:function ($$v) {_vm.pas=$$v},expression:\"pas\"}})],1),_c('table',{staticStyle:{\"margin\":\"0 auto\"},attrs:{\"width\":\"86%\"}},[_c('tbody',[_c('tr',[_c('td',{attrs:{\"align\":\"center\",\"colspan\":\"2\"}},[_c('a',{staticClass:\"btn10\",on:{\"click\":_vm.changelogin}},[_vm._v(\"登 录\")])])]),_vm._m(0)])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',[_c('td',{attrs:{\"align\":\"left\"}},[_c('br'),_c('a',{staticStyle:{\"text-decoration\":\"underline\"},attrs:{\"href\":\"javascript:;\",\"onclick\":\"javascript:servicePopupShow();\"}},[_vm._v(\"有问题？联系客服\")])]),_c('td',{attrs:{\"align\":\"right\"}},[_c('br'),_c('a',{staticStyle:{\"font-size\":\"15px\",\"text-decoration\":\"underline\"},attrs:{\"href\":\"user.php?act=user_login&back_url=user.php\"}},[_vm._v(\"使用账号密码登录\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 头部 -->\r\n    <div class=\"header-float\">\r\n      <div class=\"left\">\r\n        <a href=\"javascript:;\" class=\"more mores\" @click=\"change\"></a>\r\n      </div>\r\n      <div class=\"center\" style=\"font-size:20px;\">免费注册登录</div>\r\n      <div class=\"right\">\r\n        <router-link to=\"/tabbar/home\">\r\n          <a class=\"cart\">\r\n            <em id=\"top_cart_v2\">0</em>\r\n          </a>\r\n        </router-link>\r\n      </div>\r\n    </div>\r\n    <!-- 注册登录 -->\r\n    <van-cell-group>\r\n      <van-field v-model=\"phone\" required clearable placeholder=\"请输入用户名\" />\r\n      <van-field v-model=\"pas\" type=\"password\" :required=\"istrue\" placeholder=\"请输入密码\"></van-field>\r\n    </van-cell-group>\r\n\r\n    <!-- 底部 -->\r\n    <table width=\"86%\" style=\"margin: 0 auto;\">\r\n      <tbody>\r\n        <tr>\r\n          <td align=\"center\" colspan=\"2\">\r\n            <a class=\"btn10\" @click=\"changelogin\">登&nbsp;录</a>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td align=\"left\">\r\n            <br />\r\n            <a\r\n              href=\"javascript:;\"\r\n              style=\"text-decoration:underline;\"\r\n              onclick=\"javascript:servicePopupShow();\"\r\n            >有问题？联系客服</a>\r\n          </td>\r\n          <td align=\"right\">\r\n            <br />\r\n            <a\r\n              href=\"user.php?act=user_login&amp;back_url=user.php\"\r\n              style=\"font-size:15px;text-decoration:underline;\"\r\n            >使用账号密码登录</a>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      phone: \"\",\r\n      pas: \"\",\r\n      istrue: true,\r\n      cookie: \"\"\r\n    };\r\n  },\r\n  methods: {\r\n    //登录\r\n    async changelogin() {\r\n      this.cookie = document.cookie.slice(this.phone.length + 1);\r\n      //点击登录时把用户名和密码发到后端做请求，后端返回数据，并且根据用户名生成令牌存到cookie\r\n      //前端接到数据和令牌，判断是否登录，和把令牌存到前端cookie，第二次登录时，前端发送令牌给后端\r\n      //后端根据令牌返回是否登录\r\n      if (this.phone && this.pas) {\r\n        //非空\r\n        if (this.cookie && this.pas) {\r\n          // console.log(this.cookie);\r\n          // console.log(this.phone);\r\n\r\n          //第二次发送\r\n          this.$axios({\r\n            method: \"post\",\r\n            //headers: { \"content-type\": \"application/x-www-form-urlencoded\" },//局部更改\r\n            url: \"http://localhost:3000/sign/login\",\r\n            data: this.$qs.stringify({\r\n              //用户id或者用令牌\r\n              token: this.cookie,\r\n              phone: this.phone\r\n            })\r\n          }).then(res => {\r\n            if (res.data.length > 0) {\r\n              //登录成功\r\n              // this.$router.push({\r\n              //   name: \"home\"\r\n              // });\r\n              this.cookie = res.data;\r\n              // console.log(res.length);\r\n              console.log(document.cookie.slice(this.phone.length));\r\n\r\n              alert(\"登录成功\");\r\n            } else {\r\n              console.log(document.name);\r\n              alert(\"登录失败\");\r\n              console.log(res);\r\n              // console.log(this.cookie + \"=\");\r\n              //登录失败\r\n            }\r\n          });\r\n        } else {\r\n          // console.log(document.cookie.slice(this.phone.length));\r\n\r\n          //第一次发送\r\n          this.$axios({\r\n            method: \"post\",\r\n            headers: { \"content-type\": \"application/x-www-form-urlencoded\" }, //局部更改\r\n            url: \"http://localhost:3000/sign/login\",\r\n            data: this.$qs.stringify({\r\n              phone: this.phone,\r\n              pas: this.pas\r\n            })\r\n          }).then(res => {\r\n            //登录成功，后端把数据传到前端，前端把令牌存到cookie里,其他页面根据cookie里的值\r\n  7          //显示登录状态，现在的问题是前端可以发送请求到后端，并且后端有数据反馈，但是后端传到\r\n            //前端时发生跨域故障，解决了跨域问题，就能把注册登录做完\r\n            if (res) {\r\n              //接受到后端返回的token存到cookie里\r\n              //设置cookie\r\n              this.$router.push({\r\n                name: \"home\"\r\n              });\r\n              this.cookie = res.data;\r\n              alert(\"登录成功\");\r\n            }\r\n            setTimeout(() => {\r\n              //设置cookie\r\n              this.cookie = res.data;\r\n              var now = new Date();\r\n              now.setDate(now.getDate() + 10);\r\n              document.cookie =\r\n                this.phone +\r\n                \"=\" +\r\n                this.cookie +\r\n                \";expires=\" +\r\n                now.toUTCString() +\r\n                \";path=/\"; //设置一个站点内的文件可以共享此cookie\r\n            }, 100);\r\n            // console.log(this.cookie);\r\n          });\r\n        }\r\n      } else {\r\n        //为空\r\n        alert(\"请输入手机号码或密码\");\r\n      }\r\n    },\r\n    change() {\r\n      this.$router.push({\r\n        name: \"home\"\r\n      });\r\n    }\r\n  },\r\n  async created() {\r\n    //获取cookie值\r\n    // this.cookie = document.cookie.slice(this.phone.length + 1);\r\n    // console.log(this.cookie);\r\n    //name=malin; pwd=123456\r\n    // var arr = cookies.split(\"; \"); //['name=malin','pwd=123456']\r\n    // for (var i = 0; i < arr.length; i++) {\r\n    //   var arr2 = arr[i].split(\"=\"); //['name','malin'\r\n    //   if (this.phone == arr2[0]) {\r\n    //     return arr2[1];\r\n    //   }\r\n    // }\r\n    // this.cookie = arr2[1];\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style>\r\n.van-cell-group {\r\n  width: 350px;\r\n  position: absolute;\r\n  left: 10px;\r\n  top: 50px;\r\n}\r\ntable {\r\n  position: absolute;\r\n  top: 142px;\r\n  left: 22px;\r\n}\r\na {\r\n  font-weight: normal;\r\n  color: #726964;\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=4e15e520&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}