{"remainingRequest":"I:\\1905code\\Vue\\obj\\tes\\objcets\\node_modules\\thread-loader\\dist\\cjs.js!I:\\1905code\\Vue\\obj\\tes\\objcets\\node_modules\\babel-loader\\lib\\index.js!I:\\1905code\\Vue\\obj\\tes\\objcets\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!I:\\1905code\\Vue\\obj\\tes\\objcets\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!I:\\1905code\\Vue\\obj\\tes\\objcets\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"I:\\1905code\\Vue\\obj\\tes\\objcets\\src\\views\\Login.vue","mtime":1565434410336},{"path":"I:\\1905code\\Vue\\obj\\tes\\objcets\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\1905code\\Vue\\obj\\tes\\objcets\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\1905code\\Vue\\obj\\tes\\objcets\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"I:\\1905code\\Vue\\obj\\tes\\objcets\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"I:\\1905code\\Vue\\obj\\tes\\objcets\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"I:\\\\1905code\\\\Vue\\\\obj\\\\tes\\\\objcets\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      phone: \"\",\n      pas: \"\",\n      istrue: true,\n      cookie: \"\"\n    };\n  },\n  methods: {\n    //登录\n    changelogin: function () {\n      var _changelogin = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.cookie = document.cookie.slice(this.phone.length + 1); //点击登录时把用户名和密码发到后端做请求，后端返回数据，并且根据用户名生成令牌存到cookie\n                //前端接到数据和令牌，判断是否登录，和把令牌存到前端cookie，第二次登录时，前端发送令牌给后端\n                //后端根据令牌返回是否登录\n\n                if (this.phone && this.pas) {\n                  //非空\n                  if (this.cookie && this.pas) {\n                    // console.log(this.cookie);\n                    // console.log(this.phone);\n                    //第二次发送\n                    this.$axios({\n                      method: \"post\",\n                      //headers: { \"content-type\": \"application/x-www-form-urlencoded\" },//局部更改\n                      url: \"http://localhost:3000/sign/login\",\n                      data: this.$qs.stringify({\n                        //用户id或者用令牌\n                        token: this.cookie,\n                        phone: this.phone\n                      })\n                    }).then(function (res) {\n                      if (res.data.length > 0) {\n                        //登录成功\n                        // this.$router.push({\n                        //   name: \"home\"\n                        // });\n                        _this.cookie = res.data; // console.log(res.length);\n\n                        console.log(document.cookie.slice(_this.phone.length));\n                        alert(\"登录成功\");\n                      } else {\n                        console.log(document.name);\n                        alert(\"登录失败\");\n                        console.log(res); // console.log(this.cookie + \"=\");\n                        //登录失败\n                      }\n                    });\n                  } else {\n                    // console.log(document.cookie.slice(this.phone.length));\n                    //第一次发送\n                    this.$axios({\n                      method: \"post\",\n                      headers: {\n                        \"content-type\": \"application/x-www-form-urlencoded\"\n                      },\n                      //局部更改\n                      url: \"http://localhost:3000/sign/login\",\n                      data: this.$qs.stringify({\n                        phone: this.phone,\n                        pas: this.pas\n                      })\n                    }).then(function (res) {\n                      //登录成功，后端把数据传到前端，前端把令牌存到cookie里,其他页面根据cookie里的值\n                      7; //显示登录状态，现在的问题是前端可以发送请求到后端，并且后端有数据反馈，但是后端传到\n                      //前端时发生跨域故障，解决了跨域问题，就能把注册登录做完\n\n                      if (res) {\n                        //接受到后端返回的token存到cookie里\n                        //设置cookie\n                        _this.$router.push({\n                          name: \"home\"\n                        });\n\n                        _this.cookie = res.data;\n                        alert(\"登录成功\");\n                      }\n\n                      setTimeout(function () {\n                        //设置cookie\n                        _this.cookie = res.data;\n                        var now = new Date();\n                        now.setDate(now.getDate() + 10);\n                        document.cookie = _this.phone + \"=\" + _this.cookie + \";expires=\" + now.toUTCString() + \";path=/\"; //设置一个站点内的文件可以共享此cookie\n                      }, 100); // console.log(this.cookie);\n                    });\n                  }\n                } else {\n                  //为空\n                  alert(\"请输入手机号码或密码\");\n                }\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function changelogin() {\n        return _changelogin.apply(this, arguments);\n      }\n\n      return changelogin;\n    }(),\n    change: function change() {\n      this.$router.push({\n        name: \"home\"\n      });\n    }\n  },\n  created: function () {\n    var _created = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee2() {\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    function created() {\n      return _created.apply(this, arguments);\n    }\n\n    return created;\n  }()\n};",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,GAAA,EAAA,EAFA;AAGA,MAAA,MAAA,EAAA,IAHA;AAIA,MAAA,MAAA,EAAA;AAJA,KAAA;AAMA,GARA;AASA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,WAFA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAGA,qBAAA,MAAA,GAAA,QAAA,CAAA,MAAA,CAAA,KAAA,CAAA,KAAA,KAAA,CAAA,MAAA,GAAA,CAAA,CAAA,CAHA,CAIA;AACA;AACA;;AACA,oBAAA,KAAA,KAAA,IAAA,KAAA,GAAA,EAAA;AACA;AACA,sBAAA,KAAA,MAAA,IAAA,KAAA,GAAA,EAAA;AACA;AACA;AAEA;AACA,yBAAA,MAAA,CAAA;AACA,sBAAA,MAAA,EAAA,MADA;AAEA;AACA,sBAAA,GAAA,EAAA,kCAHA;AAIA,sBAAA,IAAA,EAAA,KAAA,GAAA,CAAA,SAAA,CAAA;AACA;AACA,wBAAA,KAAA,EAAA,KAAA,MAFA;AAGA,wBAAA,KAAA,EAAA,KAAA;AAHA,uBAAA;AAJA,qBAAA,EASA,IATA,CASA,UAAA,GAAA,EAAA;AACA,0BAAA,GAAA,CAAA,IAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA;AACA;AACA;AACA;AACA,wBAAA,KAAA,CAAA,MAAA,GAAA,GAAA,CAAA,IAAA,CALA,CAMA;;AACA,wBAAA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,MAAA,CAAA,KAAA,CAAA,KAAA,CAAA,KAAA,CAAA,MAAA,CAAA;AAEA,wBAAA,KAAA,CAAA,MAAA,CAAA;AACA,uBAVA,MAUA;AACA,wBAAA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA;AACA,wBAAA,KAAA,CAAA,MAAA,CAAA;AACA,wBAAA,OAAA,CAAA,GAAA,CAAA,GAAA,EAHA,CAIA;AACA;AACA;AACA,qBA3BA;AA4BA,mBAjCA,MAiCA;AACA;AAEA;AACA,yBAAA,MAAA,CAAA;AACA,sBAAA,MAAA,EAAA,MADA;AAEA,sBAAA,OAAA,EAAA;AAAA,wCAAA;AAAA,uBAFA;AAEA;AACA,sBAAA,GAAA,EAAA,kCAHA;AAIA,sBAAA,IAAA,EAAA,KAAA,GAAA,CAAA,SAAA,CAAA;AACA,wBAAA,KAAA,EAAA,KAAA,KADA;AAEA,wBAAA,GAAA,EAAA,KAAA;AAFA,uBAAA;AAJA,qBAAA,EAQA,IARA,CAQA,UAAA,GAAA,EAAA;AACA;AACA,wBAFA,CAEA;AACA;;AACA,0BAAA,GAAA,EAAA;AACA;AACA;AACA,wBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,0BAAA,IAAA,EAAA;AADA,yBAAA;;AAGA,wBAAA,KAAA,CAAA,MAAA,GAAA,GAAA,CAAA,IAAA;AACA,wBAAA,KAAA,CAAA,MAAA,CAAA;AACA;;AACA,sBAAA,UAAA,CAAA,YAAA;AACA;AACA,wBAAA,KAAA,CAAA,MAAA,GAAA,GAAA,CAAA,IAAA;AACA,4BAAA,GAAA,GAAA,IAAA,IAAA,EAAA;AACA,wBAAA,GAAA,CAAA,OAAA,CAAA,GAAA,CAAA,OAAA,KAAA,EAAA;AACA,wBAAA,QAAA,CAAA,MAAA,GACA,KAAA,CAAA,KAAA,GACA,GADA,GAEA,KAAA,CAAA,MAFA,GAGA,WAHA,GAIA,GAAA,CAAA,WAAA,EAJA,GAKA,SANA,CALA,CAWA;AACA,uBAZA,EAYA,GAZA,CAAA,CAbA,CA0BA;AACA,qBAnCA;AAoCA;AACA,iBA5EA,MA4EA;AACA;AACA,kBAAA,KAAA,CAAA,YAAA,CAAA;AACA;;AAtFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAwFA,IAAA,MAxFA,oBAwFA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA;AADA,OAAA;AAGA;AA5FA,GATA;AAuGA,EAAA,OAvGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    <!-- 头部 -->\r\n    <div class=\"header-float\">\r\n      <div class=\"left\">\r\n        <a href=\"javascript:;\" class=\"more mores\" @click=\"change\"></a>\r\n      </div>\r\n      <div class=\"center\" style=\"font-size:20px;\">免费注册登录</div>\r\n      <div class=\"right\">\r\n        <router-link to=\"/tabbar/home\">\r\n          <a class=\"cart\">\r\n            <em id=\"top_cart_v2\">0</em>\r\n          </a>\r\n        </router-link>\r\n      </div>\r\n    </div>\r\n    <!-- 注册登录 -->\r\n    <van-cell-group>\r\n      <van-field v-model=\"phone\" required clearable placeholder=\"请输入用户名\" />\r\n      <van-field v-model=\"pas\" type=\"password\" :required=\"istrue\" placeholder=\"请输入密码\"></van-field>\r\n    </van-cell-group>\r\n\r\n    <!-- 底部 -->\r\n    <table width=\"86%\" style=\"margin: 0 auto;\">\r\n      <tbody>\r\n        <tr>\r\n          <td align=\"center\" colspan=\"2\">\r\n            <a class=\"btn10\" @click=\"changelogin\">登&nbsp;录</a>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td align=\"left\">\r\n            <br />\r\n            <a\r\n              href=\"javascript:;\"\r\n              style=\"text-decoration:underline;\"\r\n              onclick=\"javascript:servicePopupShow();\"\r\n            >有问题？联系客服</a>\r\n          </td>\r\n          <td align=\"right\">\r\n            <br />\r\n            <a\r\n              href=\"user.php?act=user_login&amp;back_url=user.php\"\r\n              style=\"font-size:15px;text-decoration:underline;\"\r\n            >使用账号密码登录</a>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      phone: \"\",\r\n      pas: \"\",\r\n      istrue: true,\r\n      cookie: \"\"\r\n    };\r\n  },\r\n  methods: {\r\n    //登录\r\n    async changelogin() {\r\n      this.cookie = document.cookie.slice(this.phone.length + 1);\r\n      //点击登录时把用户名和密码发到后端做请求，后端返回数据，并且根据用户名生成令牌存到cookie\r\n      //前端接到数据和令牌，判断是否登录，和把令牌存到前端cookie，第二次登录时，前端发送令牌给后端\r\n      //后端根据令牌返回是否登录\r\n      if (this.phone && this.pas) {\r\n        //非空\r\n        if (this.cookie && this.pas) {\r\n          // console.log(this.cookie);\r\n          // console.log(this.phone);\r\n\r\n          //第二次发送\r\n          this.$axios({\r\n            method: \"post\",\r\n            //headers: { \"content-type\": \"application/x-www-form-urlencoded\" },//局部更改\r\n            url: \"http://localhost:3000/sign/login\",\r\n            data: this.$qs.stringify({\r\n              //用户id或者用令牌\r\n              token: this.cookie,\r\n              phone: this.phone\r\n            })\r\n          }).then(res => {\r\n            if (res.data.length > 0) {\r\n              //登录成功\r\n              // this.$router.push({\r\n              //   name: \"home\"\r\n              // });\r\n              this.cookie = res.data;\r\n              // console.log(res.length);\r\n              console.log(document.cookie.slice(this.phone.length));\r\n\r\n              alert(\"登录成功\");\r\n            } else {\r\n              console.log(document.name);\r\n              alert(\"登录失败\");\r\n              console.log(res);\r\n              // console.log(this.cookie + \"=\");\r\n              //登录失败\r\n            }\r\n          });\r\n        } else {\r\n          // console.log(document.cookie.slice(this.phone.length));\r\n\r\n          //第一次发送\r\n          this.$axios({\r\n            method: \"post\",\r\n            headers: { \"content-type\": \"application/x-www-form-urlencoded\" }, //局部更改\r\n            url: \"http://localhost:3000/sign/login\",\r\n            data: this.$qs.stringify({\r\n              phone: this.phone,\r\n              pas: this.pas\r\n            })\r\n          }).then(res => {\r\n            //登录成功，后端把数据传到前端，前端把令牌存到cookie里,其他页面根据cookie里的值\r\n  7          //显示登录状态，现在的问题是前端可以发送请求到后端，并且后端有数据反馈，但是后端传到\r\n            //前端时发生跨域故障，解决了跨域问题，就能把注册登录做完\r\n            if (res) {\r\n              //接受到后端返回的token存到cookie里\r\n              //设置cookie\r\n              this.$router.push({\r\n                name: \"home\"\r\n              });\r\n              this.cookie = res.data;\r\n              alert(\"登录成功\");\r\n            }\r\n            setTimeout(() => {\r\n              //设置cookie\r\n              this.cookie = res.data;\r\n              var now = new Date();\r\n              now.setDate(now.getDate() + 10);\r\n              document.cookie =\r\n                this.phone +\r\n                \"=\" +\r\n                this.cookie +\r\n                \";expires=\" +\r\n                now.toUTCString() +\r\n                \";path=/\"; //设置一个站点内的文件可以共享此cookie\r\n            }, 100);\r\n            // console.log(this.cookie);\r\n          });\r\n        }\r\n      } else {\r\n        //为空\r\n        alert(\"请输入手机号码或密码\");\r\n      }\r\n    },\r\n    change() {\r\n      this.$router.push({\r\n        name: \"home\"\r\n      });\r\n    }\r\n  },\r\n  async created() {\r\n    //获取cookie值\r\n    // this.cookie = document.cookie.slice(this.phone.length + 1);\r\n    // console.log(this.cookie);\r\n    //name=malin; pwd=123456\r\n    // var arr = cookies.split(\"; \"); //['name=malin','pwd=123456']\r\n    // for (var i = 0; i < arr.length; i++) {\r\n    //   var arr2 = arr[i].split(\"=\"); //['name','malin'\r\n    //   if (this.phone == arr2[0]) {\r\n    //     return arr2[1];\r\n    //   }\r\n    // }\r\n    // this.cookie = arr2[1];\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style>\r\n.van-cell-group {\r\n  width: 350px;\r\n  position: absolute;\r\n  left: 10px;\r\n  top: 50px;\r\n}\r\ntable {\r\n  position: absolute;\r\n  top: 142px;\r\n  left: 22px;\r\n}\r\na {\r\n  font-weight: normal;\r\n  color: #726964;\r\n}\r\n</style>\r\n\r\n"],"sourceRoot":"src/views"}]}